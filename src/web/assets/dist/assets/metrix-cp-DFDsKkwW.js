typeof Craft.Metrix>"u"&&(Craft.Metrix={});(function(r){r(document).on("click","[data-refresh-settings]",function(l){l.preventDefault();const a=r(this),n=a.parent().parent(),s=n.find("select"),f=a.data("source"),u=a.data("refresh-settings"),i={source:f,setting:u},m=a.parents("form"),g=a.data("source-class"),p=Craft.expandPostArray(Garnish.getPostData(m));i.sourceData=p.types[g];const o=function(e){let t=n.find(".mui-error");e||t.remove(),t.length||(t=r('<div class="mui-error error"></div>').appendTo(n)),t.html(e)},h=function(e){const t=s.val();let c="";r.each(e,($,d)=>{c+=`<option value="${d.value}">${d.label}</option>`}),s.html(c),t&&s.val(t)};a.addClass("mui-loading mui-loading-sm"),o(null),Craft.sendActionRequest("POST","metrix/sources/refresh-settings",{data:i}).then(e=>{if(e.data.error){let t=Craft.t("metrix","An error occurred.");e.data.error&&(t+=`<br><code>${e.data.error}</code>`,e.data.file&&e.data.line&&(t+=`<br><code>${e.data.file}:${e.data.line}</code>`)),o(t);return}h(e.data)}).catch(e=>{let t=e;e.response&&e.response.data&&e.response.data.error&&(t+=`<br><code>${e.response.data.error}</code>`,e.response.data.file&&e.response.data.line&&(t+=`<br><code>${e.response.data.file}:${e.response.data.line}</code>`)),o(t)}).finally(()=>{a.removeClass("mui-loading mui-loading-sm")})})})(jQuery);
//# sourceMappingURL=metrix-cp-DFDsKkwW.js.map
