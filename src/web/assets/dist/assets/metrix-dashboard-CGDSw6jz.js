import{j as e,D as H,a as U,B as z,b as K,c as E,X as Q,g as T,L as k,d as q,e as G}from"./Button-FL204d0O.js";import{r as l}from"./react-DJpHYEPN.js";import{M as X,u as $,P as J,a as Y,L as Z,b as y,c as ee,W as te,d as v,e as se,f as ce,F as ne,g as re,r as ae,h as ie,i as le,S as oe,j as de,k as me,l as he,m as xe,D as ue,n as fe,C as ge,o as pe,p as je,q as V,s as P,t as Ce,v as we,w as ve,x as be}from"./MetrixConfig-BmmY9V7S.js";import{u as Se,a as O,K as ye,P as Ne,D as Me,c as ze,S as De,v as We,b as Ee,C as Fe}from"./dndkit-CA2JRGlN.js";import"./chartjs-BzvTYjqM.js";const Ae=t=>new URLSearchParams(window.location.search).get(t),_=(t,a)=>{const s=new URLSearchParams(window.location.search);s.set(t,a);const c=`${window.location.pathname}?${s.toString()}`;window.history.pushState({},"",c)};class Le extends l.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const c=this.props.sizeRef.current;c.height=s.offsetHeight||0,c.width=s.offsetWidth||0,c.top=s.offsetTop,c.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Re({children:t,isPresent:a}){const s=l.useId(),c=l.useRef(null),d=l.useRef({width:0,height:0,top:0,left:0}),{nonce:m}=l.useContext(X);return l.useInsertionEffect(()=>{const{width:h,height:r,top:n,left:o}=d.current;if(a||!c.current||!h||!r)return;c.current.dataset.motionPopId=s;const f=document.createElement("style");return m&&(f.nonce=m),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${r}px !important;
            top: ${n}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[a]),e.jsx(Le,{isPresent:a,childRef:c,sizeRef:d,children:l.cloneElement(t,{ref:c})})}const ke=({children:t,initial:a,isPresent:s,onExitComplete:c,custom:d,presenceAffectsLayout:m,mode:h})=>{const r=$(Pe),n=l.useId(),o=l.useCallback(x=>{r.set(x,!0);for(const p of r.values())if(!p)return;c&&c()},[r,c]),f=l.useMemo(()=>({id:n,initial:a,isPresent:s,custom:d,onExitComplete:o,register:x=>(r.set(x,!1),()=>r.delete(x))}),m?[Math.random(),o]:[s,o]);return l.useMemo(()=>{r.forEach((x,p)=>r.set(p,!1))},[s]),l.useEffect(()=>{!s&&!r.size&&c&&c()},[s]),h==="popLayout"&&(t=e.jsx(Re,{isPresent:s,children:t})),e.jsx(J.Provider,{value:f,children:t})};function Pe(){return new Map}const A=t=>t.key||"";function I(t){const a=[];return l.Children.forEach(t,s=>{l.isValidElement(s)&&a.push(s)}),a}const Ve=({children:t,exitBeforeEnter:a,custom:s,initial:c=!0,onExitComplete:d,presenceAffectsLayout:m=!0,mode:h="sync"})=>{const r=l.useMemo(()=>I(t),[t]),n=r.map(A),o=l.useRef(!0),f=l.useRef(r),x=$(()=>new Map),[p,D]=l.useState(r),[C,N]=l.useState(r);Y(()=>{o.current=!1,f.current=r;for(let g=0;g<C.length;g++){const u=A(C[g]);n.includes(u)?x.delete(u):x.get(u)!==!0&&x.set(u,!1)}},[C,n.length,n.join("-")]);const S=[];if(r!==p){let g=[...r];for(let u=0;u<C.length;u++){const w=C[u],W=A(w);n.includes(W)||(g.splice(u,0,w),S.push(w))}h==="wait"&&S.length&&(g=S),N(I(g)),D(r);return}const{forceRender:b}=l.useContext(Z);return e.jsx(e.Fragment,{children:C.map(g=>{const u=A(g),w=r===C||n.includes(u),W=()=>{if(x.has(u))x.set(u,!0);else return;let F=!0;x.forEach(i=>{i||(F=!1)}),F&&(b==null||b(),N(f.current),d&&d())};return e.jsx(ke,{isPresent:w,initial:!o.current||c?void 0:!1,custom:w?void 0:s,presenceAffectsLayout:m,mode:h,onExitComplete:w?void 0:W,children:g},u)})})};function B(){const[t,a]=l.useState(!1),s=y(c=>c.newWidget);return e.jsxs(H,{open:t,onOpenChange:a,children:[e.jsx(U,{asChild:!0,children:e.jsxs(z,{variant:"secondary",type:"button",children:[e.jsx(ee,{strokeWidth:"4"})," ",Craft.t("metrix","New widget")]})}),e.jsx(K,{children:e.jsx(te,{isNew:!0,newWidget:s,onClose:()=>a(!1)})})]})}const Oe=({widget:t,handleWidthChange:a,handleRemove:s})=>{const{attributes:c,listeners:d,setNodeRef:m,transform:h,transition:r}=Ee({id:t.__id}),n={transform:Fe.Transform.toString(h),transition:r};return e.jsxs("div",{ref:m,style:n,className:E("mc-flex mc-items-start mc-gap-2"),children:[e.jsx("div",{className:"mc-text-slate-400",children:e.jsx(t.component.meta.icon,{className:"mc-size-5"})}),e.jsxs("div",{className:"mc-flex-1",children:[e.jsxs("div",{className:"mc-text-sm mc-font-medium mc-leading-tight",children:[t.data.dimensionLabel&&`${t.data.dimensionLabel} - `,t.data.metricLabel]}),e.jsxs("div",{className:"mc-text-xs mc-text-slate-400 mc-font-medium",children:[t.component.meta.name," - ",t.data.periodLabel]})]}),e.jsx("div",{className:"mc-pt-0.5",children:e.jsx(le,{value:t.data.width,onChange:o=>a(o)})}),e.jsx("div",{...c,...d,className:"mc-pt-0.5",children:e.jsx(z,{variant:"clear",size:"icon",className:"mc-p-0 mc-text-slate-500 hover:mc-text-blue-500 mc-cursor-move",type:"button",title:"Settings","aria-label":"Settings",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",children:e.jsx("path",{d:"M71.3 295.6c-21.9-21.9-21.9-57.3 0-79.2s57.3-21.9 79.2 0 21.9 57.3 0 79.2s-57.4 21.9-79.2 0zM184.4 182.5c-21.9-21.9-21.9-57.3 0-79.2s57.3-21.9 79.2 0 21.9 57.3 0 79.2-57.3 21.8-79.2 0zm0 147c21.9-21.9 57.3-21.9 79.2 0s21.9 57.3 0 79.2s-57.3 21.9-79.2 0c-21.9-21.8-21.9-57.3 0-79.2zM297.5 216.4c21.9-21.9 57.3-21.9 79.2 0s21.9 57.3 0 79.2s-57.3 21.9-79.2 0c-21.8-21.9-21.8-57.3 0-79.2z"})})})}),e.jsx("div",{className:"mc-pt-0.5",children:e.jsx(z,{variant:"clear",size:"icon",className:"mc-p-0 mc-text-slate-500 hover:mc-text-red-500",type:"button",title:Craft.t("metrix","Remove Widget"),"aria-label":Craft.t("metrix","Remove Widget"),onClick:()=>s(),children:e.jsx(Q,{className:"mc-size-4",strokeWidth:"3"})})})]})},_e=()=>{const t=v(n=>n.widgets),a=v(n=>n.reorderWidgets),s=v(n=>n.updateWidget),c=v(n=>n.removeWidget);v(n=>n.removingWidgets);const d=Se(O(Ne,{activationConstraint:{delay:0,tolerance:5}}),O(ye)),m=async({active:n,over:o})=>{if(n.id!==o.id){const f=t.find(p=>p.__id===n.id),x=t.find(p=>p.__id===o.id);f&&x&&await a(f,x)}},h=(n,o)=>{s(n,{width:o},!1)},r=n=>{window.confirm(Craft.t("metrix","Are you sure you want to delete this widget? This action cannot be undone."))&&c(n)};return e.jsxs(se,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(z,{variant:"secondary",size:"icon",type:"button",title:"Settings","aria-label":"Settings",children:e.jsx(ne,{className:"mc-size-4"})})}),e.jsx(re,{side:"left",sideOffset:3,align:"start",className:"mc-w-auto mc-p-0",children:e.jsx("div",{className:"mc-w-[400px] mc-max-h-[600px] mc-p-4 mc-overflow-y-auto mc-overflow-x-hidden",children:e.jsx(Me,{sensors:d,collisionDetection:ze,modifiers:[ae,ie],onDragEnd:m,children:e.jsx(De,{strategy:We,items:t.map(n=>n.__id),children:e.jsx("div",{className:"mc-flex mc-flex-col mc-gap-4",children:t.map(n=>e.jsx(Oe,{widget:n,handleWidthChange:o=>h(n,o),handleRemove:()=>r(n)},n.__id))})})})})})]})},Ie=({viewOptions:t,currentView:a,onChangeView:s,showHeader:c,showHeaderActions:d})=>c&&e.jsxs("header",{className:"mc-flex mc-items-center mc-justify-between mc-mb-4",children:[e.jsxs("div",{className:"mc-flex mc-items-center mc-justify-between mc-gap-4",children:[e.jsx("h1",{className:"mc-font-bold mc-text-lg",title:Craft.t("metrix","Dashboard"),children:Craft.t("metrix","Dashboard")}),t.length>1&&e.jsxs(oe,{value:a,onValueChange:s,children:[e.jsx(de,{className:E("mc-px-3 mc-py-2 mc-gap-1 mc-text-sm","mc-bg-[#c4d0e1] hover:mc-bg-[#bccadc]","hover:mc-shadow-none focus:mc-shadow-none"),children:e.jsx(me,{})}),e.jsx(he,{className:E("mc-border mc-bg-white"),children:t.map(m=>e.jsx(xe,{className:"focus:mc-bg-slate-100",value:m.value,children:m.label},m.value))})]})]}),d&&e.jsxs("div",{className:"mc-flex mc-gap-2",children:[e.jsx(B,{}),e.jsx(_e,{})]})]}),Te=({widgets:t,loading:a})=>e.jsx("div",{className:E("mc-grid mc-auto-rows-widgets mc-gap-4 mc-grid-cols-1 md:mc-grid-cols-2 lg:mc-grid-cols-3",a?"mc-opacity-10":""),children:e.jsx(Ve,{children:t.map(s=>{const c=s.component;return s.component!==null?e.jsx(c,{widget:s,wrapperClassName:E("mc-col-span-1",s.data.width==="2"?"lg:mc-col-span-2":"",s.data.width==="3"?"lg:mc-col-span-3":"")},s.__id):""})})}),$e=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 513.2 513.2",className:"your-custom-class",children:[e.jsxs("g",{children:[e.jsx("g",{children:e.jsx("path",{fill:"#FFFFFF",d:`M226.9,309.2c-2.1-0.4-3.9-0.9-5.3-1.4
            c-0.1,0-0.2-0.1-0.3-0.1c-0.7-0.3-1.1-1.1-0.8-1.8c0-0.1,0.1-0.2,0.2-0.3c9.7-13,25-21.4,42.4-21.4c16.9,0,32,8,41.6,20.4
            c0.1,0.2,0.3,0.4,0.4,0.6c0.6,0.8,0.4,1.9-0.4,2.5c-0.1,0.1-0.3,0.2-0.5,0.3c-6.7,2.4-20.2,3.6-40.7,3.6c-8.6,0-16-0.2-22.3-0.6
             M236,310.5c-1.8-0.2-3.4-0.4-5-0.6L236,310.5z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M263.6,312.7c-8.6,0-16.1-0.2-22.4-0.6c-0.7,0-1.2-0.6-1.1-1.3c0-0.7,0.6-1.1,1.3-1.1
            c6.2,0.4,13.7,0.6,22.2,0.6c20.2,0,33.8-1.2,40.3-3.5c0.1,0,0.1,0,0.2-0.1c0.1-0.1,0.2-0.2,0.2-0.4c0-0.1,0-0.3-0.1-0.4
            c-0.2-0.2-0.3-0.4-0.4-0.6c-9.9-12.7-24.7-19.9-40.7-19.9c-16.4,0-31.5,7.6-41.4,20.9c-0.1,0.2,0,0.3,0.1,0.3l0.3,0.1
            c1.4,0.5,3.2,0.9,5.2,1.3c0.6,0.1,1.1,0.8,0.9,1.4c-0.1,0.6-0.7,1.1-1.4,0.9c-2.1-0.4-4-0.9-5.5-1.4l-0.3-0.1
            c-1.3-0.5-2-2-1.5-3.3c0.1-0.2,0.2-0.4,0.3-0.6C230,291,245.8,283,263,283c16.7,0,32.2,7.6,42.6,20.9c0.1,0.2,0.3,0.4,0.5,0.6
            c0.5,0.6,0.7,1.4,0.6,2.2s-0.5,1.5-1.2,2c-0.2,0.2-0.5,0.3-0.8,0.4C297.8,311.5,284.4,312.7,263.6,312.7z M236,311.7
            c0,0-0.1,0-0.1,0c-1.8-0.2-3.5-0.4-5-0.6c-0.7-0.1-1.1-0.7-1-1.3c0.1-0.7,0.7-1.1,1.3-1c1.5,0.2,3.2,0.4,4.9,0.6
            c0.7,0.1,1.1,0.6,1.1,1.3C237.2,311.2,236.6,311.7,236,311.7z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#E8F0FE",d:`M263,288.4c12,0,23.4,4.7,34.1,14.2l0.6,0.5
            c0.5,0.4,0.5,1.2,0.1,1.7c-0.2,0.2-0.4,0.3-0.6,0.4c-6.4,1.6-17.8,2.4-34.2,2.4c-4,0-7.7,0-11-0.1c-1.6-2-2.5-4.2-2.5-6.5
            c0-5,4.1-9.4,10.6-12.4C261,288.4,262,288.4,263,288.4z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#FFFFFF",d:`M302,233.7c-1.1-0.6-3.1-1.6-5.9-2.8l-4.4-1.6c-18.1-4.8-36,3.3-40,18.2c-0.3,1-0.5,1.9-0.6,2.9
            l1,0.3c2.7-2.2,7.3-3,12.1-1.7c4.4,1.2,7.3,3.8,8.8,6.7c2.7-1.8,7.5-2.3,11.9-1.1c4.8,1.3,9.6,4.6,10.8,7.8
            c2.7-2.2,7.3-3,12.1-1.7c4,1.1,7.2,3.3,8.8,5.9c0.2-0.5,0.3-1,0.5-1.5c2.5-9.3-1.1-19.4-8.5-26.4
            C306.7,236.8,304.5,235.1,302,233.7z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M316.7,267.9c-0.4,0-0.8-0.2-1-0.5c-1.6-2.4-4.6-4.4-8.1-5.4c-4.3-1.1-8.6-0.6-11.1,1.4
            c-0.3,0.2-0.7,0.3-1.1,0.2c-0.4-0.1-0.7-0.4-0.8-0.7c-1-2.7-5.4-5.9-10-7.1c-3.9-1.1-8.5-0.7-11,1c-0.3,0.2-0.6,0.2-1,0.1
            c-0.3-0.1-0.6-0.3-0.8-0.6c-1.5-2.9-4.3-5.1-8-6c-4.3-1.1-8.6-0.6-11.1,1.4c-0.3,0.2-0.7,0.3-1.1,0.2l-1-0.3
            c-0.6-0.2-1-0.7-0.9-1.3c0.1-1,0.3-2.1,0.6-3.1c2-7.6,7.5-13.7,15.4-17.3c7.5-3.4,16.4-4.1,25.2-2c0.2-0.6,0.6-1.8,1.2-4.2
            c0.2-0.6,0.8-1,1.5-0.8c0.6,0.2,1,0.8,0.8,1.5c-1.4,5.3-1.8,6.5-3.2,6.1c-8.5-2.3-17.2-1.7-24.5,1.6c-7.2,3.3-12.2,8.9-14.1,15.7
            c-0.1,0.4-0.2,0.7-0.3,1.1c3.1-1.8,7.5-2.2,11.9-1c3.9,1,7,3.2,8.9,6.2c3.1-1.5,7.7-1.8,11.8-0.7c4.1,1.1,8.9,3.9,11,7.2
            c3.1-1.8,7.5-2.3,12-1.1c3.2,0.9,6,2.5,8,4.5c2-8.4-1.2-17.8-8.3-24.6c-1.9-1.9-4.1-3.5-6.5-4.8c-1.1-0.6-3.1-1.5-5.8-2.7
            c-0.6-0.3-0.9-1-0.6-1.6c0.3-0.6,1-0.9,1.6-0.6c2.8,1.2,4.8,2.2,6,2.8c2.5,1.4,4.9,3.2,7,5.2c7.9,7.6,11.3,18.2,8.8,27.6
            c-0.1,0.5-0.3,1.1-0.5,1.6c-0.1,0.4-0.5,0.7-1,0.8C316.8,267.9,316.8,267.9,316.7,267.9z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#E8F0FE",d:`M312.5,255.5L312.5,255.5c0.2,0.6-0.2,1.3-0.9,1.4
            c-0.3,0.1-0.6,0-0.9-0.1c-1.9-1.1-3.5-1.8-4.8-2.1c-4.3-1.1-8.4-0.8-11.1,0.6c-1.4-2.1-3.9-3.9-7.1-5c3.2-5,5.2-10.3,5.9-15.3
            C303.8,238.6,310.1,245.4,312.5,255.5z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M273.7,297.8c-0.1,0-0.2,0-0.3,0c-0.6-0.2-1-0.8-0.8-1.5l9.9-36.8c0.2-0.6,0.8-1,1.5-0.8
            c0.6,0.2,1,0.8,0.8,1.5l-9.9,36.8C274.7,297.4,274.2,297.8,273.7,297.8z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M274.1,254.1c-0.1,0-0.2,0-0.3-0.1c-0.6-0.2-1-0.9-0.8-1.5c2.8-9.4,7-16,12.5-19.7
            c0.5-0.4,1.3-0.2,1.6,0.3s0.2,1.3-0.3,1.7c-5,3.3-8.9,9.5-11.5,18.4C275.1,253.8,274.6,254.1,274.1,254.1z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M295.5,262.8c-0.1,0-0.2,0-0.3-0.1c-0.6-0.2-1-0.9-0.8-1.5c2.6-8.5,3.2-15.4,1.9-20.7
            c-0.2-0.6,0.2-1.3,0.9-1.4c0.6-0.2,1.3,0.2,1.4,0.9c1.5,5.7,0.8,13.1-1.9,22C296.5,262.4,296,262.8,295.5,262.8z`})}),e.jsxs("g",{children:[e.jsx("path",{fill:"#FFFFFF",d:`M223.9,232.4c6.2,0,11.3-5.1,11.3-11.3c0-6.2-5.1-11.3-11.3-11.3s-11.3,5.1-11.3,11.3
            C212.6,227.4,217.6,232.4,223.9,232.4z`}),e.jsx("path",{fill:"#8DA4C9",d:`M223.9,233.6c-6.9,0-12.5-5.6-12.5-12.5s5.6-12.5,12.5-12.5s12.5,5.6,12.5,12.5
            S230.8,233.6,223.9,233.6z M223.9,211c-5.6,0-10.1,4.5-10.1,10.1s4.5,10.1,10.1,10.1s10.1-4.5,10.1-10.1S229.5,211,223.9,211z`})]}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M212.6,211c-0.3,0-0.6-0.1-0.8-0.3l-4.8-4.8c-0.5-0.5-0.5-1.2,0-1.7c0.5-0.5,1.2-0.5,1.7,0l4.8,4.8
            c0.5,0.5,0.5,1.2,0,1.7C213.2,210.9,212.9,211,212.6,211z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M239.9,238.4c-0.3,0-0.6-0.1-0.8-0.3l-4.8-4.8c-0.5-0.5-0.5-1.2,0-1.7c0.5-0.5,1.2-0.5,1.7,0
            l4.8,4.8c0.5,0.5,0.5,1.2,0,1.7C240.5,238.3,240.2,238.4,239.9,238.4z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M207.8,238.4c-0.3,0-0.6-0.1-0.8-0.3c-0.5-0.5-0.5-1.2,0-1.7l4.8-4.8c0.5-0.5,1.2-0.5,1.7,0
            c0.5,0.5,0.5,1.2,0,1.7l-4.8,4.8C208.4,238.3,208.1,238.4,207.8,238.4z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M235.2,211c-0.3,0-0.6-0.1-0.8-0.3c-0.5-0.5-0.5-1.2,0-1.7l4.8-4.8c0.5-0.5,1.2-0.5,1.7,0
            c0.5,0.5,0.5,1.2,0,1.7l-4.8,4.8C235.8,210.9,235.5,211,235.2,211z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M207.8,222.3h-5.9c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2h5.9c0.7,0,1.2,0.5,1.2,1.2
            S208.5,222.3,207.8,222.3z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M245.9,222.3h-5.9c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2h5.9c0.7,0,1.2,0.5,1.2,1.2
            S246.5,222.3,245.9,222.3z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M223.9,206.3c-0.7,0-1.2-0.5-1.2-1.2v-5.9c0-0.7,0.5-1.2,1.2-1.2s1.2,0.5,1.2,1.2v5.9
            C225.1,205.7,224.5,206.3,223.9,206.3z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M223.9,244.3c-0.7,0-1.2-0.5-1.2-1.2v-5.9c0-0.7,0.5-1.2,1.2-1.2s1.2,0.5,1.2,1.2v5.9
            C225.1,243.8,224.5,244.3,223.9,244.3z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M222.6,265.2h-20.2c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2h20.2c0.7,0,1.2,0.5,1.2,1.2
            S223.3,265.2,222.6,265.2z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M246.5,274.7h-30.3c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2h30.3c0.7,0,1.2,0.5,1.2,1.2
            S247.1,274.7,246.5,274.7z`})}),e.jsx("g",{children:e.jsx("path",{fill:"#8DA4C9",d:`M258.3,265.2h-20.2c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2h20.2c0.7,0,1.2,0.5,1.2,1.2
            S259,265.2,258.3,265.2z`})})]}),e.jsxs("g",{style:{opacity:.8},children:[e.jsx("g",{children:e.jsx("path",{fill:"#C5D4EA",d:`M256.6,355.6c-54.6,0-99-44.4-99-99s44.4-99,99-99s99,44.4,99,99S311.2,355.6,256.6,355.6z
             M256.6,158.6c-54,0-98,44-98,98s44,98,98,98c54,0,98-44,98-98S310.6,158.6,256.6,158.6z`})}),e.jsx("g",{style:{opacity:.8},children:e.jsx("path",{fill:"#C5D4EA",d:`M256.6,393.7c-75.6,0-137.1-61.5-137.1-137.1c0-75.6,61.5-137.1,137.1-137.1
            c75.6,0,137.1,61.5,137.1,137.1C393.7,332.2,332.2,393.7,256.6,393.7z M256.6,120.5c-75,0-136.1,61.1-136.1,136.1
            c0,75,61.1,136.1,136.1,136.1c75,0,136.1-61.1,136.1-136.1C392.7,181.5,331.6,120.5,256.6,120.5z`})}),e.jsx("g",{style:{opacity:.5},children:e.jsx("path",{fill:"#C5D4EA",d:`M256.6,433.3c-97.4,0-176.7-79.3-176.7-176.7S159.2,79.9,256.6,79.9s176.7,79.3,176.7,176.7
            S354,433.3,256.6,433.3z M256.6,80.9c-96.9,0-175.7,78.8-175.7,175.7s78.8,175.7,175.7,175.7c96.9,0,175.7-78.8,175.7-175.7
            S353.4,80.9,256.6,80.9z`})}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{fill:"#C5D4EA",d:`M256.6,473.5c-58,0-112.4-22.6-153.4-63.5c-41-41-63.5-95.5-63.5-153.4s22.6-112.4,63.5-153.4
            c41-41,95.5-63.5,153.4-63.5c58,0,112.4,22.6,153.4,63.5c41,41,63.5,95.5,63.5,153.4S451,369,410,410S314.5,473.5,256.6,473.5z
             M256.6,40.6c-57.7,0-111.9,22.5-152.7,63.3c-40.8,40.8-63.3,95-63.3,152.7s22.5,111.9,63.3,152.7c40.8,40.8,95,63.3,152.7,63.3
            s111.9-22.5,152.7-63.3s63.3-95,63.3-152.7s-22.5-111.9-63.3-152.7C368.5,63.1,314.3,40.6,256.6,40.6z`})}),e.jsx("g",{style:{opacity:.1},children:e.jsx("path",{fill:"#C5D4EA",d:`M256.6,513.2c-68.5,0-133-26.7-181.4-75.1C26.7,389.5,0,325.1,0,256.6s26.7-133,75.1-181.4
            S188,0,256.6,0s133,26.7,181.4,75.1c48.5,48.5,75.2,112.9,75.2,181.4S486.5,389.5,438,438C389.5,486.5,325.1,513.2,256.6,513.2z
             M256.6,1C188.3,1,124.1,27.6,75.9,75.9C27.6,124.1,1,188.3,1,256.6S27.6,389,75.9,437.3c48.3,48.3,112.5,74.9,180.7,74.9
            c68.3,0,132.4-26.6,180.7-74.9c48.3-48.3,74.9-112.5,74.9-180.7s-26.6-132.4-74.9-180.7S324.8,1,256.6,1z`})})]})]}),R=({type:t,onPresetSelect:a,loadingPresets:s,errorPresets:c})=>{const d=y(h=>h.presets),m=()=>{if(t==="noSources")return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mc-font-semibold mc-text-2xl mc-mb-4 mc-text-slate-600",children:Craft.t("metrix","No sources available")}),e.jsx("p",{className:"mc-text-slate-500 mc-mb-6",children:Craft.t("metrix","Add a data source to start using widgets.")})]});if(t==="noViewOptions")return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mc-font-semibold mc-text-2xl mc-mb-4 mc-text-slate-600",children:Craft.t("metrix","No views available")}),e.jsx("p",{className:"mc-text-slate-500 mc-mb-6",children:Craft.t("metrix","Configure views to display your widgets.")})]});if(t==="noWidgets"){const h=T(c==null?void 0:c.error);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mc-font-semibold mc-text-2xl mc-mb-4 mc-text-slate-600",children:Craft.t("metrix","No widgets yet")}),e.jsx("p",{className:"mc-text-slate-500 mc-mb-6",children:Craft.t("metrix","Start adding widgets to see your data at a glance.")}),e.jsxs("div",{className:"mc-flex mc-gap-4",children:[e.jsx(B,{}),d.length>0&&e.jsx(e.Fragment,{children:d.length===1?e.jsxs(z,{variant:"primary",size:"medium",type:"button",title:Craft.t("metrix","Load preset widgets"),"aria-label":Craft.t("metrix","Load preset widgets"),className:"mc-gap-3",onClick:()=>a(d[0].value),disabled:s,children:[Craft.t("metrix","Load preset widgets"),s&&e.jsx(k,{size:"tiny",className:"mc-border-t-white mc-border-r-white"})]}):e.jsxs(ue,{children:[e.jsx(fe,{className:"focus:mc-shadow-none",asChild:!0,children:e.jsxs(z,{variant:"primary",size:"medium",type:"button",title:Craft.t("metrix","Load preset widgets"),"aria-label":Craft.t("metrix","Load preset widgets"),className:"mc-gap-3",disabled:s,children:[Craft.t("metrix","Load preset widgets"),s&&e.jsx(k,{size:"tiny",className:"mc-border-t-white mc-border-r-white"}),e.jsx(ge,{})]})}),e.jsx(pe,{align:"end",children:d.map((r,n)=>e.jsx(je,{onClick:()=>a(r.value),children:r.label},r.value))})]})})]}),c&&h&&e.jsxs("div",{className:"mc-mt-8 mc-text-red-500 mc-text-lg mc-text-center mc-w-full mc-leading-relaxed",children:[e.jsx("strong",{className:"mc-block",children:h.heading}),e.jsx("small",{className:"mc-block mc-mb-2",children:h.text}),e.jsx("small",{className:"mc-block mc-font-mono mc-text-[10px]",children:h.trace.map(r=>e.jsx("span",{className:"mc-block",children:r},r))})]})]})}};return e.jsxs("div",{className:"zilch mc-flex mc-relative mc-overflow-hidden mc-flex-col mc-items-center mc-justify-center mc-text-center mc-pt-[19rem]",children:[e.jsx("div",{className:"mc-w-[512px] mc-h-[512px] mc-absolute mc-z-0 mc-top-0 -mc-mt-[5rem]",children:e.jsx($e,{})}),e.jsx("div",{className:"mc-relative mc-z-0 mc-flex mc-flex-col mc-items-center mc-w-full",children:m()})]})},Be=()=>{const t=v(i=>i.widgets),a=v(i=>i.loadWidgets),s=v(i=>i.clearWidgets),c=y(i=>i.viewOptions),d=y(i=>i.currentView),m=y(i=>i.setCurrentView),h=y(i=>i.sources),[r,n]=l.useState(!1),[o,f]=l.useState(null),[x,p]=l.useState(!1),[D,C]=l.useState(null);l.useEffect(()=>{var M;const i=Ae("view"),j=(M=c[0])==null?void 0:M.value;if(c.length>0){const L=i||j;m(L),i!==L&&_("view",L)}},[c,m]);const N=async i=>{p(!0),C(null);try{const{data:j}=await V.get("widgets",{view:d,preset:i}),M=P(j);a(M)}catch(j){console.error("Failed to load preset widgets:",j),C({message:Craft.t("metrix","Failed to load preset widgets."),error:j})}finally{p(!1)}},S=async i=>{m(i),_("view",i),s(),n(!0),f(null);try{const{data:j}=await V.get("widgets",{view:i}),M=P(j);a(M)}catch(j){console.error("Failed to load widgets:",j),f({message:Craft.t("metrix","Failed to load widgets."),error:j})}finally{n(!1)}},b=t.length>0,g=c.length>0,u=h.length>0,w=()=>!(!u||!g||c.length===0&&!b),W=()=>!(!w()||!b),F=()=>{if(!u)return e.jsx(R,{type:"noSources"});if(!g)return e.jsx(R,{type:"noViewOptions"});if(r)return e.jsx("div",{className:"mc-w-full mc-h-[50vh] mc-flex mc-items-center mc-justify-center",children:e.jsx(k,{size:"large"})});if(o){const i=T(o==null?void 0:o.error);return e.jsx("div",{className:"mc-w-full mc-h-[50vh] mc-flex mc-items-center mc-justify-center",children:e.jsxs("div",{className:"mc-text-red-500 mc-text-lg mc-text-center",children:[e.jsx("strong",{className:"mc-block mc-mb-1",children:i.heading}),e.jsx("small",{className:"mc-block mc-mb-1",children:i.text}),e.jsx("small",{className:"mc-block mc-font-mono mc-text-[9px] mc-whitespace-nowrap mc-overflow-auto",children:i.trace.map(j=>e.jsx("span",{className:"mc-block",children:j},j))})]})})}return b?e.jsx(Te,{widgets:t,loading:r}):e.jsx(R,{type:"noWidgets",onPresetSelect:N,loadingPresets:x,errorPresets:D})};return e.jsxs("div",{className:"mc-mx-auto mc-max-w-screen-xl",children:[e.jsx(Ie,{viewOptions:c,currentView:d,onChangeView:S,showHeader:w(),showHeaderActions:W()}),F()]})};typeof Craft.Metrix>"u"&&(Craft.Metrix={});Craft.Metrix.Dashboard=Garnish.Base.extend({init(t){q();const a=document.querySelector(".metrix-dashboard"),s=G(a),{loadWidgets:c}=v.getState(),{loadSettings:d,fetchMetrics:m,fetchDimensions:h}=Ce.getState(),{setNewWidget:r,setPeriodOptions:n,setViewOptions:o,setPresets:f,setSources:x,setRealtimeInterval:p}=y.getState(),{widgets:D,widgetSettings:C,realtimeInterval:N,newWidget:S,periodOptions:b,viewOptions:g,presets:u,sources:w}=t;c(P(D)),d(C),p(N),r(S),n(b),o(g),f(u),x(w),s.render(l.createElement(Be,{widgetStore:v}))}});Craft.Metrix.Config=new we;document.dispatchEvent(new CustomEvent("onMetrixConfigReady",{bubbles:!0}));Craft.Metrix.SharedComponents={WidgetLarge:ve,WidgetSmall:be};
//# sourceMappingURL=metrix-dashboard-CGDSw6jz.js.map
